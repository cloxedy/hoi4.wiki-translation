<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Моддінг Ідей (Національних духів) HOI4</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@700&display=swap" rel="stylesheet">
    
    <!-- Посилання на ваш існуючий файл CSS -->
    <link rel="stylesheet" href="./styles/ideas.css"> 
</head>
<body class="theme-light theme-dark-base"> 
<div class="page-wrapper">
    <div class="top-bar">
        <div class="controls">
            <label for="language-switcher">Мова:</label>
            <select id="language-switcher" onchange="switchLanguage(this.value)">
                <option value="uk" selected>Українська</option>
                <option value="ru">Русский (ideas_ru.html)</option> <!-- Змініть на ideas_ru.html, якщо плануєте -->
            </select>

            <label for="theme-switcher">Тема:</label>
            <select id="theme-switcher">
                <option value="theme-light">Світла</option>
                <option value="theme-aistudio-dark">AI Studio Dark</option>
                <option value="theme-nord-dark">Nord Dark</option>
                <option value="theme-dracula">Dracula</option>
                <option value="theme-one-dark-pro">One Dark Pro</option>
            </select>
        </div>
        <div class="quick-nav-link">
            <!-- Посилання на головну сторінку моддінгу -->
            <a href="./index" class="nav-button">← Головна сторінка моддінгу</a> 
            <a href="#header-text" class="nav-button">Вгору &#x2191;</a>
            <a href="#focused-navigation-menu" class="nav-button">Меню розділів &#x2193;</a>
        </div>
    </div>

    <header id="header-text">
        <h1>Моддінг Ідей (Національних духів)</h1>
    </header>

    <div class="container">
        <div class="disclaimer">
            <p><strong>Увага!</strong> Це переклад оригінальної сторінки <a href="https://hoi4.paradoxwikis.com/Idea_modding" target="_blank" rel="noopener noreferrer">Idea modding - Hearts of Iron 4 Wiki</a>.</p>
            <p>Я не є автором оригінального контенту. Переклад виконано за допомогою інструментів штучного інтелекту та може містити неточності. Оригінал знаходиться за вказаним посиланням.</p>
        </div>

        <div id="main-content">
            <p><em>Це вікі, що підтримується спільнотою. Якщо ви помітили помилку, будь ласка, допоможіть її виправити.</em></p>

            <p>Ідеї — це статичний спосіб застосування модифікаторів до країни, зокрема національні духи, закони, конструктори, духи офіцерського корпусу та приховані ідеї. Самі ідеї визначаються в <code>/Hearts of Iron IV/common/ideas/*.txt</code>, тоді як категорії ідей визначаються в <code>/Hearts of Iron IV/common/idea_tags/*.txt</code>.</p>

            <div class="table-of-contents">
                <h3>Зміст</h3>
                <ul>
                    <li><a href="#national-spirit-creation">1. Створення національного духу</a>
                        <ul>
                            <li><a href="#localisation">1.1. Локалізація</a></li>
                            <li><a href="#picture">1.2. Зображення</a></li>
                            <li><a href="#implementation">1.3. Реалізація</a></li>
                            <li><a href="#modifiers">1.4. Модифікатори</a></li>
                            <li><a href="#effects">1.5. Ефекти</a></li>
                            <li><a href="#cancellation">1.6. Скасування</a></li>
                            <li><a href="#additional-arguments">1.7. Додаткові аргументи</a></li>
                            <li><a href="#full-idea-file-example">1.8. Повний приклад файлу ідеї</a></li>
                        </ul>
                    </li>
                    <li><a href="#other-idea-categories">2. Інші категорії ідей</a>
                        <ul>
                            <li><a href="#hidden-ideas">2.1. Приховані ідеї</a></li>
                            <li><a href="#idea-category-arguments">2.2. Аргументи категорії ідей</a></li>
                            <li><a href="#additional-arguments-cat">2.3. Додаткові аргументи</a></li>
                            <li><a href="#example-cat">2.4. Приклад</a></li>
                        </ul>
                    </li>
                    <li><a href="#categories">3. Категорії</a>
                        <ul>
                            <li><a href="#gfx-and-gui">3.1. GFX та GUI</a></li>
                        </ul>
                    </li>
                    <li><a href="#modifying-cost-of-a-slot">4. Зміна вартості слота</a></li>
                    <li><a href="#notes-ideas">5. Примітки</a></li>
                </ul>
            </div>
            
            <h2 id="national-spirit-creation">1. Створення національного духу</h2>
            <p>Духи створюються в <code>/Hearts of Iron IV/common/ideas/*.txt</code>. Приклад файлу з порожніми духами, ще без модифікаторів, але які все ще можна застосувати, якщо додати через <code>add_ideas = idea_name</code>, виглядає так:</p>
            <pre><code>ideas = {
    country = {
        my_idea_1 = {
        }
        my_idea_2 = {
        }
    }
}</code></pre>
            <p>У цьому випадку <code>ideas = { ... }</code> охоплює кожну ідею у файлі, що необхідно включити через обмеження рушія. Тим часом, <code>country = {}</code> — це категорія ідей, саме тому гра розпізнає <code>my_idea_1</code> та <code>my_idea_2</code> як духи, а не як закони чи конструктори, які також є ідеями.</p>

            <h3 id="localisation">1.1. Локалізація</h3>
            <p>Локалізація для ідей визначається в будь-якому файлі <code>/Hearts of Iron IV/localisation/english/*_l_english.yml</code>, закодованому в UTF-8-BOM, якщо припускати англійську мову. Якщо ідея не має назви, гра використовує список назв країни в <code>/Hearts of Iron IV/common/names</code> для створення випадкової назви. Однак це не стосується національних духів, де використовується ID ідеї. Ідея може мати як назву, так і опис, який з'являється при наведенні на неї. Їхні записи локалізації визначаються так, на прикладі <code>ZZZ_example_idea</code>:</p>
            <pre><code>l_english:
 ZZZ_example_idea: "Назва ідеї"
 ZZZ_example_idea_desc: "Опис ідеї"</code></pre>
            <p><code>name = new_idea_name</code> призначає назві ідеї використання іншого ключа локалізації. Це може бути корисно, якщо ви плануєте модифікувати ідею, замінюючи її кілька разів, забезпечуючи, що вам не потрібно створювати дублікат запису локалізації для кожного екземпляра ідеї. Це буде визначено у файлі локалізації аналогічно:</p>
            <pre><code>l_english:
 new_idea_name: "Нова назва ідеї"
 new_idea_name_desc: "Новий опис ідеї"</code></pre>

            <h3 id="picture">1.2. Зображення</h3>
            <h4>Загальний огляд спрайтів</h4>
            <p>Для завантаження GFX гра використовує систему спрайтів. Спрайти — це визначення в коді, які прив'язують назву до файлу зображення, а також опціонально додають додаткову інформацію, таку як анімація, кількість кадрів, спосіб завантаження зображення тощо. Це означає, що розміщення зображення в папці gfx недостатньо для його роботи, спрайт також повинен використовувати цей файл зображення.</p>
            <p>Спрайти визначаються в будь-якому файлі <code>/Hearts of Iron IV/interface/*.gfx</code> (це окремо від <code>gfx/interface/</code>), який відкривається текстовим редактором. Щоб створити новий файл <code>.gfx</code>, можна створити текстовий файл і перейменувати його, змінивши розширення (у Windows Провідник повинен показувати розширення, що він не робить за замовчуванням). Зокрема, спрайти визначаються всередині блоку <code>spriteTypes = { ... }</code>, щоб відокремити їх від шрифтів та стрілок на карті, які також визначаються в цій папці, тоді як найпростіший спрайт з найменшою кількістю обов'язкових властивостей — це <code>spriteType = { ... }</code>. Найпростіше визначення спрайта виглядає так:</p>
            <pre><code>spriteTypes = {
    spriteType = {
        name = GFX_first_sprite                         # У деяких випадках початок з GFX_ є обов'язковим для роботи.
        texturefile = gfx/interface/folder/filename.dds # Папка та назва файлу не мають значення, доки вони правильні
    }                                                   # Для розділення папок можна використовувати лише пряму косу риску '/' (може бути подвоєна як '//').
    spriteType = {                                      # Зображення не обов'язково має бути .dds, оскільки .tga та .png є прийнятними.
        name = GFX_second_sprite
        texturefile = gfx/interface/folder2/filename2.dds
        noOfFrames = 2 # Розділяє зображення на 2 половини, між якими можна динамічно перемикатися в GUI
    }
}</code></pre>
            <p>У цьому випадку створюється спрайт з назвою <code>GFX_first_sprite</code>, до якого прив'язується зображення <code>/Hearts of Iron IV/gfx/interface/folder/filename.dds</code>, і аналогічно другий спрайт. Другий спрайт буде розділений на 2 кадри: це визначається тим, що ліва половина зображення є першим кадром, а права половина — другим (більше кадрів далі розділятимуть зображення горизонтально). Це не робить спрайт анімованим, лише вмикає опцію перемикання між двома половинами за потреби. <code>GFX_second_sprite:1</code> служить посиланням на перший кадр, і GUI можна налаштувати для зміни показаного кадру залежно від контексту, наприклад, з радіостанціями. Щоб додати анімацію, використовується <code>frameAnimatedSpriteType</code>.</p>
            <p>Ніколи не є обов'язковим копіювати файл базової гри для зміни спрайта. Якщо є дублікати визначень спрайта з однаковою назвою в різних файлах, гра надасть пріоритет тому, який буде оцінено пізніше, на основі назви файлу, а старіший спрайт буде повністю проігноровано. Це можна забезпечити, починаючи назву файлу заміни символом, що знаходиться пізно в таблиці символів ASCII. Зазвичай для цієї мети використовується мала літера 'z'. Наприклад, щоб змінити кількість кадрів у <code>GFX_idea_traits_strip</code> на 10, можна визначити спрайт з такою назвою з 10 кадрами у файлі мода <code>modname/interface/zz_replace.gfx</code> замість копіювання файлу базової гри. Оскільки більшість файлів <code>.gfx</code> визначають невід'ємні частини користувацького інтерфейсу, їх копіювання може призвести до того, що завантажені файли мода втратять спрайти після великого оновлення гри, що відображатиметься в грі як стандартне зображення, яким за замовчуванням є собака помилок. Щоб полегшити тягар необхідності перевіряти файли інтерфейсу, найкраще ніколи не копіювати файли <code>.gfx</code>, якщо тільки додаткові зміни не будуть активно шкідливими для мода, як, наприклад, з <code>interface/subuniticons.gfx</code>.</p>
            <p>За замовчуванням ідея використовує спрайт, який має таку ж назву, як ідея, але з префіксом <code>GFX_idea_</code> на початку. Наприклад, ідея з назвою <code>my_idea_1</code> використовуватиме спрайт з назвою <code>GFX_idea_my_idea_1</code>.</p>
            <p>Це можна змінити за допомогою атрибута <code>picture = my_sprite</code> всередині ідеї. Гра все ще вставляє префікс <code>GFX_idea_</code> до аргументу, щоб визначити спрайт, який слід використовувати, наприклад, <code>picture = XYZ</code> призводить до використання <code>GFX_idea_XYZ</code> як спрайта. Якщо гра не може знайти спрайт з очікуваною назвою, замість нього буде використано стандартну іконку <code>Unknown.png</code>. Вставлення префікса означає, що здебільшого <code>picture = GFX_XYZ</code> (що призводить до використання <code>GFX_idea_GFX_XYZ</code> як спрайта) або <code>picture = idea_XYZ</code> (що призводить до використання <code>GFX_idea_idea_XYZ</code> як спрайта) призведе до того, що гра очікуватиме неіснуючий спрайт, і що спрайти, які не відповідають шаблону іменування <code>GFX_idea_XYZ</code>, не можуть використовуватися як зображення ідей.</p>
            <p>Якщо <code>texturefile</code> у спрайті вказано неправильно, ідея буде невидимою у вікні політики країни, але все одно застосовуватиме модифікатори. Переконайтеся, що ідея зберігається з тим самим шляхом до папки, тією ж назвою файлу (включаючи розширення) і що використовується правильний роздільник папок.</p>
            <p>Також можна зробити так, щоб зображення залежало від <code>graphical_culture_2d</code> країни, визначеного у файлі <code>/Hearts of Iron IV/common/countries/*.txt</code>. Це робиться шляхом додавання назви після назви зображення, розділеної підкресленням. Наприклад, спрайт з назвою <code>GFX_idea_my_picture_middle_eastern_2d</code> у своєму визначенні відображатиметься замість <code>GFX_idea_my_picture</code> для країн, які мають 2D графічну культуру <code>middle_eastern_2d</code>.</p>

            <h3 id="implementation">1.3. Реалізація</h3>
            <p>Дух можна додати лише вручну, використовуючи ефект. <code>add_ideas = idea_name</code> у блоці ефектів (наприклад, нагорода за завершення фокуса), тоді як <code>remove_ideas = idea_name</code> видалить його.</p>
            <p>Щоб замінити дві ідеї і щоб гра відобразила модифікатори, використовується <code>swap_ideas</code>. Немає способу безпосередньо модифікувати ідею, однак у випадку, якщо два замінені духи мають однакову назву в локалізації, це відобразиться в грі як модифікація ідеї. <code>swap_ideas</code> використовується так:</p>
            <pre><code>swap_ideas = {
    remove_idea = old_idea
    add_idea = new_idea
}</code></pre>
            <p>У більшості випадків достатньо створити кілька ідей і перемикатися між ними, наприклад, якщо є пряма послідовність кількох етапів (скриптовані ефекти можна використовувати для створення однієї серії умовних операторів та повторного їх використання кожного разу, коли це потрібно). Якщо створення кількох ідей є надто нездійсненним, наприклад, якщо є кілька послідовностей, які потрібно було б модифікувати, динамічні модифікатори дозволяють змінні значення модифікаторів, але вони приймають лише модифікатори (а не непов'язані атрибути, такі як бонуси до досліджень або обладнання) і з ними важче працювати через відсутність гарячого перезавантаження.</p>
            <p>Щоб дух тривав певний період часу, використовується ефект <code>add_timed_idea</code> наступним чином:</p>
            <pre><code>add_timed_idea = {
    idea = my_timed_idea
    days = 365
}</code></pre>
            <p><code>modify_timed_idea</code> можна використовувати для продовження або прискорення таймера за потреби.</p>
            <p>Щоб країна починала з ідеєю, файл у <code>/Hearts of Iron IV/history/countries/</code> для цієї країни служить блоком ефектів, який визначає початкову історичну інформацію. Використання <code>add_ideas</code>, зазвичай у розширеній формі для одночасного призначення кількох ідей, змусить її починати з цією ідеєю. Щоб ідея відображалася при виборі країни, закладка редагується таким чином, щоб включити ідею до її блоку <code>ideas = { ... }</code> для запису країни.</p>

            <h3 id="modifiers">1.4. Модифікатори</h3>
            <p>Модифікатори застосовуються безперервно, доки дух застосований до країни. Разом з модифікаторами дух також може додавати бонус до категорії технологій або модифікувати архетип обладнання. Дух може застосовувати модифікатори лише до країни, яка має цей дух, немає способу перейти до іншої країни. Кожен з цих атрибутів є повністю окремим всередині ідеї, і тому кожен з них повинен знаходитися безпосередньо всередині ідеї. Наприклад, визначення <code>research_bonus</code> всередині <code>modifier = { ... }</code> є помилковим, оскільки <code>research_bonus</code> є атрибутом ідеї, а не модифікатором.</p>
            <p><code>modifier = { ... }</code> зберігає звичайні модифікатори, що застосовуються до країни з духом. Блок модифікаторів може містити кілька модифікаторів, також дозволені негативні значення. Змінні в цьому розділі не працюють: замість них використовуйте динамічні модифікатори. Типовий приклад блоку модифікаторів:</p>
            <pre><code>modifier = {
    political_power_cost = 0.1
    stability_factor = -0.2
}</code></pre>
            <p><code>targeted_modifier = { ... }</code> призначений для використання модифікаторів, спрямованих на іншу країну. Ціль вказується як <code>tag = ABC</code>, де ABC представляє тег цілі. Вони все ще застосовуються до країни з духом, але їхній ефект спрямований на іншу країну. Наприклад, наступний блок надасть країні з ідеєю 10% бонус до атаки проти Афганістану:</p>
            <pre><code>targeted_modifier = {
    tag = AFG
    attack_bonus_against = 0.1
}</code></pre>
            <p><code>research_bonus = { ... }</code> надає країні прискорення до дослідження певної категорії технологій. Несортований список категорій технологій можна знайти в <code>/Hearts of Iron IV/common/technology_tags/</code> або, якщо бажаєте знати, які саме технології призначені кожній категорії, окремі технології можна перевірити в <code>/Hearts of Iron IV/common/technologies/</code>. Наступний приклад надасть +10% бонус до дослідження есмінців та -20% бонус до артилерії:</p>
            <pre><code>research_bonus = {
    dd_tech = 0.1
    artillery = -0.2
}</code></pre>
            <p><code>equipment_bonus = { ... }</code> застосовує бонуси до архетипу обладнання або типу архетипів обладнання. За замовчуванням бонус не надається негайно, а вимагає спочатку дослідження нової технології, як це робиться в ідеях конструкторів. Це можна запобігти, додавши <code>instant = yes</code> всередині архетипу обладнання в бонусі обладнання. Архетипи обладнання визначаються в <code>/Hearts of Iron IV/common/units/equipment/*.txt</code>, де ви також можете знайти, що до них можна застосувати. Назва блоку у файлі <code>/Hearts of Iron IV/common/units/equipment/*.txt</code> буде архетипом, тоді як <code>type = { ... }</code> або <code>type = archetype_type</code> надає типи, які має архетип обладнання. Наступний приклад змінить вартість виробництва обладнання типу артилерії (включаючи артилерію, ракетну артилерію та танкову артилерію) на -20%, застосовуючись негайно, а також збільшить м'яку атаку будь-якого піхотного обладнання, дослідженого після додавання духу, на 10%:</p>
            <pre><code>equipment_bonus = {
    artillery = {
        instant = yes
        build_cost_ic = -0.2
    }
    infantry_equipment = {
        soft_attack = 0.1
    }
}</code></pre>
            <p><code>rule</code> модифікує набір правил, які визначають, що країні дозволено робити. Зазвичай це включає дипломатичні опції (такі як опції мирної конференції або виклик до війни). Вони відображаються в підказці лише якщо правило відрізняється від значення без ідеї, наприклад, <code>can_create_factions = no</code> зазвичай не відображатиметься в підказці, оскільки країни за замовчуванням вже не можуть створювати фракції.</p>
            <pre><code>rule = {
    can_join_factions = no
    can_send_volunteers = yes
}</code></pre>
            <p><a href="https://hoi4.paradoxwikis.com/Game_rule" target="_blank" rel="noopener noreferrer">Список ігрових правил</a></p>

            <h3 id="effects">1.5. Ефекти</h3>
            <p>Дух можна налаштувати так, щоб він застосовував ефекти при додаванні або видаленні. Це робиться, відповідно, за допомогою блоків ефектів <code>on_add</code> та <code>on_remove</code>, що виглядають як у наступному прикладі:</p>
            <pre><code>on_add = {
    add_stability = 0.1
}
on_remove = {
    add_political_power = -50
}</code></pre>
            <p>Ефекти виконуватимуться лише якщо ідея додана після початку гри: якщо це зроблено через файл історії або блок <code>effect = { ... }</code> закладки, ефекти не виконуватимуться. У цьому випадку необхідно відтворити ефекти, що надаються при додаванні ідеї, в тому ж блоці ефектів, який додає ідею.</p>

            <h3 id="cancellation">1.6. Скасування</h3>
            <p>Дух можна налаштувати так, щоб він автоматично скасовувався, як тільки буде виконано набір тригерів. Це робиться за допомогою блоку <code>cancel</code>. Скасування також спрацює для блоку ефектів <code>on_remove</code> в ідеї, якщо він присутній. Це виглядатиме так:</p>
            <pre><code>cancel = {
    has_political_power > 50 
}</code></pre>

            <h3 id="additional-arguments">1.7. Додаткові аргументи</h3>
            <p>Ще один блок тригерів, який може увійти в ідею, це <code>allowed_civil_war = { ... }</code>. При початку громадянської війни це оцінюється для кожної сторони, і дух з'явиться лише для сторін, де це істинно. Наприклад, <code>has_government = democratic</code> забезпечить, що лише демократична сторона в громадянській війні отримає дух. За замовчуванням завжди хибно, що призводить до зникнення духів при початку громадянської війни. Встановлення його завжди істинним може бути кращим за замовчуванням, змушуючи його з'являтися для обох сторін.</p>
            <p><code>do_effect = { ... }</code> — це блок тригерів, який призначає необхідні умови для того, щоб ідея застосовувала свої модифікатори. Якщо хибно, модифікатори (включаючи бонуси до досліджень та обладнання) не застосовуватимуться, але ідея не буде видалена.</p>

            <h3 id="full-idea-file-example">1.8. Повний приклад файлу ідеї</h3>
            <pre><code>ideas = {
    country = { # Необхідно, щоб гра розглядала їх як духи, а не інший тип ідеї.
        my_spirit = {
            picture = my_picture        # Використання GFX_idea_my_picture
            modifier = {
                training_time_factor = -0.1
            }
            targeted_modifier = {
                tag = QAT
                defense_bonus_against = 0.2
            }
            research_bonus = {
                infantry = 0.1
            }
            equipment_bonus = {
                infantry_equipment = {
                    instant = yes
                    defense = 0.2
                }
            }
            rule = {
                can_join_factions = no
            }
        }
        my_spirit_2 = {        # Використання GFX_idea_my_spirit_2
            allowed_civil_war = {
                has_government = democratic         # З'являтися в громадянській війні лише для демократичної сторони.
            }
            cancel = {
                democratic > 0.6
            }
            on_add = {
                add_popularity = {
                    ideology = democratic
                    popularity = 0.2
                }
            }
            on_remove = {
                if = {
                    limit = {
                        democratic > 0.6
                    }
                    start_civil_war = {
                        ideology = democratic
                        size = 0.6
                    }
                }
            }
            do_effect = {
                NOT = {
                    has_government = democratic
                }
            }
            modifier = {
                democratic_drift = 0.005
            }
        }
    }
}</code></pre>

            <hr>
            <h2 id="other-idea-categories">2. Інші категорії ідей</h2>
            <p>Ідеї, що не є духами, можуть використовувати все, що може бути всередині духів, однак є більше аргументів, які має сенс додавати до них, і які нічого не роблять у духах або не мають причин для додавання.</p>

            <h3 id="hidden-ideas">2.1. Приховані ідеї</h3>
            <p>Приховані ідеї абсолютно такі ж, як і звичайні духи, у всіх аспектах щодо створення, за винятком того, що вони повинні бути визначені всередині категорії ідей <code>hidden_ideas</code> замість використання <code>country</code>. Це забезпечить, що ідея буде прихована і не відображатиметься в контейнері духів. Однак все ще може мати сенс створювати для них локалізацію: якщо прихована ідея скасовується автоматично, з'явиться спливаюче вікно, а при наведенні на певні елементи (такі як лічильник стабільності або швидкість дослідження) відображатиметься кожна ідея, яка її модифікує.</p>

            <h3 id="idea-category-arguments">2.2. Аргументи категорії ідей</h3>
            <p>Ці аргументи використовуються всередині категорії ідей у файлі <code>/Hearts of Iron IV/common/ideas/*.txt</code>.</p>
            <ul>
                <li><code>designer = yes</code> позначає всю категорію як ідеї конструкторів. Це в основному використовується для ШІ.</li>
                <li><code>law = yes</code> позначає всю категорію як закони. Це в основному використовується для ШІ.</li>
                <li><code>use_list_view = yes</code> позначає всю категорію для використання спискового вигляду для вибору ідеї, подібно до того, як базова гра обробляє закони.</li>
            </ul>
            <p>Це виглядатиме у файлі ідей так:</p>
            <pre><code>ideas = {
    my_law_category = {
        law = yes
        use_list_view = yes
        my_law_1 = {
        }
        my_law_2 = {
        }
    }
}</code></pre>

            <h3 id="additional-arguments-cat">2.3. Додаткові аргументи</h3>
            <p>Це передбачає, що ідея належить до типу, який можна вибрати в грі, наприклад, закон або конструктор.</p>
            <ul>
                <li><code>allowed</code> — це блок тригерів, який перевіряється лише на початку гри або при завантаженні збереження, в основному використовується для обмеження ідеї для країни (як <code>tag = BHR</code> або <code>original_tag = POL</code>) та/або DLC (як <code>has_dlc = "One Step Back"</code>). Якщо умова <code>allowed</code> для ідеї не виконана, вона ніколи не з'явиться у виборі, якщо тільки вона не стане істинною при перезавантаженні збереження; однак ручне призначення через <code>add_ideas</code> обходить перевірку. Якщо пропущено, вважається завжди дозволеним. Це перевіряється лише один раз!</li>
                <li><code>allowed_to_remove</code> — це блок тригерів, який деталізує, коли саме ви можете видалити ідею, змінюючи її на іншу в категорії. Це перевіряється безперервно, на відміну від <code>allowed</code>.</li>
                <li><code>visible</code> — це блок тригерів, який безперервно перевіряє кожен кадр, чи виконано <code>allowed</code>, що необхідно для того, щоб ідея була видимою на екрані вибору рішень. Краще розміщувати перевірки країни або DLC в <code>allowed</code>.</li>
                <li><code>available</code> — це блок тригерів, який безперервно перевіряє кожен кадр, чи виконано <code>visible</code>, що необхідно для можливості фактично взяти ідею. Якщо хибно, ідея залишатиметься видимою, але буде сірою та неможливою для вибору. Це застосовується поверх вартості політичної влади.</li>
                <li><code>cost = 123</code> — це ціна в політичній владі, необхідна для додавання ідеї. Якщо не встановлено, вона становить 150 політичної влади<sup>[a]</sup>.</li>
                <li><code>removal_cost = 123</code> — це ціна в політичній владі, необхідна для видалення ідеї. Якщо встановлено -1, ідею не можна видалити вручну. За замовчуванням 0, якщо не встановлено.</li>
                <li><code>level = 2</code> використовується в ідеях для створення зростаючої ціни, подібно до законів про призов. Якщо у вас є закон рівня 1, зміна на рівень 3 вимагатиме вартості ідеї рівня 2 на додаток до рівня 3, і навпаки.</li>
                <li><code>traits</code> — це блок рис, які призначені цій ідеї, визначені в <code>/Hearts of Iron IV/common/country_leader/*.txt</code>, також надаючи статичний модифікатор і відображаючись поруч з ідеєю.</li>
                <li><code>ledger</code> вирішує, до якого розвідувального журналу буде призначена ідея. Це в основному залишок, що зараз застосовується до системи персонажів, але все ще може використовуватися в духах офіцерського корпусу. Можливі значення: <code>army</code>, <code>air</code>, <code>navy</code>, <code>military</code> (з'являється в кожному з попередніх журналів), <code>civilian</code>, <code>all</code> та <code>hidden</code>.</li>
            </ul>

            <h3 id="example-cat">2.4. Приклад</h3>
            <pre><code>ideas = {
    law_category = {
        law = yes
        use_list_view = yes 
        my_law = {
            allowed_to_remove = {
                num_of_civilian_factories > 10
            }
            removal_cost = 100
            cost = 100
            level = 3
            modifier = {
                production_speed_industrial_complex_factor = 0.2
            }
        }
    }
    designer_category = {
        designer = yes
        my_designer = {        # Вартість не визначена, за замовчуванням 150
            allowed = {
                tag = QAT
            }
            visible = {
                has_tech = infantry_weapons1
            }
            available = {
                has_equipment = {
                    infantry_equipment > 1000
                }
            }
            traits = { infantry_equipment_manufacturer }
        }
    }
}</code></pre>

            <hr>
            <h2 id="categories">3. Категорії</h2>
            <p>Категорії ідей визначаються в будь-якому файлі <code>/Hearts of Iron IV/common/idea_tags/*.txt</code>. Усі категорії будуть міститися у верхньому елементі <code>idea_categories</code> і можуть містити такі аргументи:</p>
            <ul>
                <li><code>slot</code> — це належний слот категорії ідей. Це те, що відображається в GUI у меню політики країни, і це те, що ідеї повинні мати як свою категорію у своєму визначенні.</li>
                <li><code>character_slot</code> — це слот персонажа. Ідеї також можуть бути визначені для використання цього слота, і він відображатиметься в GUI як звичайний слот ідеї, однак.</li>
                <li><code>cost</code> — це стандартна ціна в політичній владі для додавання ідеї в один зі слотів цієї категорії. Це застосовується, якщо ідея не має власної.</li>
                <li><code>removal_cost</code> — це стандартна ціна в політичній владі для видалення ідеї з одного зі слотів цієї категорії.</li>
                <li><code>ledger</code> — це розвідувальний журнал, визначений для ідей у цій категорії, якщо не перевизначено всередині слота, ідеї або персонажа. Можливі значення: <code>army</code>, <code>air</code>, <code>navy</code>, <code>military</code> (з'являється в кожному з попередніх журналів), <code>civilian</code>, <code>all</code> та <code>hidden</code>. Крім того, можна використовувати <code>invalid</code>, змушуючи визначати журнал на один рівень нижче.</li>
                <li><code>hidden</code> — це булеве значення, що робить цю категорію невидимою в GUI. Опціонально, за замовчуванням <code>no</code>.</li>
                <li><code>politics_tab</code> — це булеве значення, що робить цю категорію видимою у вкладці політики. Опціонально, за замовчуванням <code>yes</code>.</li>
            </ul>
            <p>Це виглядатиме так:</p>
            <pre><code>idea_categories = {
    my_category = {
        slot = my_slot
        character_slot = my_character_slot
        cost = 30
        removal_cost = 10
        ledger = hidden
    }
}</code></pre>
            <p>Категорія потім використовуватиметься ідеєю через слот (що дозволяє зіставити ідею з категорією). Файл також включає <code>slot_ledgers</code>, який розподіляє слоти ідей по розвідувальним журналам індивідуально, що матиме пріоритет над журналом категорії ідей. Приклад його використання:</p>
            <pre><code>slot_ledgers = {
    XXX_idea_slot = civilian
    ZZZ_idea_slot = invalid
}</code></pre>
            <p><code>Invalid</code> вимагатиме специфікації в кожній ідеї індивідуально.</p>

            <h3 id="gfx-and-gui">3.1. GFX та GUI</h3>
            <p><strong>Див. також: <a href="https://hoi4.paradoxwikis.com/Interface_modding" target="_blank" rel="noopener noreferrer">Моддінг інтерфейсу</a></strong></p>
            <p>Кожна категорія ідей представляє рядок у вікні політики країни, тоді як кожен слот представляє слот під цим рядком. Контейнерне вікно <code>country_politics_idea_category_entry</code> у файлі <code>/Hearts of Iron IV/interface/countrypoliticsview.gui</code> визначає інформацію користувацького інтерфейсу про кожен рядок. Найважливішим тут є <code>gridbox</code>, оскільки він визначає наступне:</p>
            <ul>
                <li>Розмір кожного слота ідеї в категорії, за замовчуванням 80 завширшки та 64 заввишки. Це використовується для відстаней між слотами.</li>
                <li>Максимальна кількість слотів, за замовчуванням 7 по горизонталі та 1 по вертикалі. Якщо не налаштовано, неможливо мати більше 7 слотів ідей у категорії.</li>
                <li>Формат <code>gridbox</code>, що визначає, в якому напрямку додаються слоти ідей.</li>
            </ul>
            <p>Іконка категорії ідей, що відображається зліва від рядка категорії, визначається спрайтом <code>GFX_idea_categories</code>. Спрайт розділений на кілька кадрів по горизонталі, і кожній категорії призначається його частина залежно від її порядку, визначеного в <code>/Hearts of Iron IV/common/idea_tags/*.txt</code>. Спрайт визначається в <code>/Hearts of Iron IV/interface/countrypoliticsview.gfx</code>, і його визначення в базовій грі складається з наступного:</p>
            <pre><code>    spriteType = {
        name = "GFX_idea_categories"
        texturefile = "gfx/interface/idea_categories.dds"
        noOfFrames = 6
    }</code></pre>
            <p>При додаванні нової категорії переконайтеся, що оновили спрайт та кількість кадрів відповідно.</p>
            <p>Для слотів ідей можна визначити іконку, яка використовуватиметься для них, якщо до цього слота не призначено жодної ідеї. Це визначення в будь-якому файлі <code>/Hearts of Iron IV/interface/*.gfx</code>, на прикладі <code>XXX_idea_slot</code>, робиться наступним чином:</p>
            <pre><code>    spriteType = {
        name = GFX_idea_slot_XXX_idea_slot
        textureFile = gfx/interface/filename.dds
    }</code></pre>
            <p>Іншими словами, спрайт повинен мати таку ж назву, як і слот ідеї, але з префіксом <code>GFX_idea_slot_</code> на початку.</p>

            <hr>
            <h2 id="modifying-cost-of-a-slot">4. Зміна вартості слота</h2>
            <p>Модифікатор <code><idea slot>_cost_factor</code> можна використовувати для зміни ціни в політичній владі для додавання ідей або персонажів у цей слот. Однак існує обмеження для цього модифікатора. Щоб він працював, для слота ідей повинні бути попередньо визначені будь-які ідеї або персонажі.</p>
            <p>Файли в папці <code>/Hearts of Iron IV/common/ideas/*.txt</code> завантажуються в порядку ідентифікаторів символів Unicode, які розміщують великі літери перед підкресленнями, а ті — перед малими літерами. Наприклад, це означає, що файл з назвою <code>TAG.txt</code> завантажується перед <code>_economy.txt</code> або <code>_manpower.txt</code> (місця розташування законів у базовій грі), які завантажуватимуться перед <code>country.txt</code>. Через вищезгадану особливість це означає, що ідея з модифікатором, що впливає на ціну закону, наприклад, <code>economy_cost_factor = -0.10</code>, видасть помилку, якщо назва файлу починається з великої літери, якщо тільки закони не зберігаються у файлах, відмінних від базової гри.</p>
            <p>Існує два основних способи це виправити. Перший — просто змінити назву файлу ідей країни, змінивши її, наприклад, з <code>GER.txt</code> на <code>germany.txt</code>. Якщо вам потрібно зберегти ту саму назву файлу для перезапису файлу, замість цього можна створити новий файл. Альтернативно, припускаючи, що у вас є <code>replace_path</code> до папки ідей, ви можете перейменувати файли, що зберігають закони, щоб вони починалися з символу з меншим ID, наприклад, на <code>00_economy.txt</code>, який завантажуватиметься до <code>TAG.txt</code>.</p>
            <p>Крім того, це також означає, що в слотах персонажів повинні бути визначені ідеї, щоб модифікатор працював, наприклад, <code>political_advisor_cost_factor = 0.1</code>. Це тому, що персонажі завантажуються пізніше, ніж ідеї або риси лідерів країн, тому вони ще не завантажені під час оцінки модифікатора, що спричиняє помилку. Це можна обійти, створивши ідеї для слотів персонажів у файлах <code>/Hearts of Iron IV/common/ideas/*.txt</code>. Вони ніколи не з'являться для країн, оскільки це слоти персонажів, а не слоти ідей, але ідея, завантажена заздалегідь, виправить помилку.</p>

            <hr>
            <h2 id="notes-ideas">5. Примітки</h2>
            <p><sup>[a]</sup> Встановлення порожнього файлу для перезапису файлу загалом ідентичне його вивантаженню на практиці, оскільки гра зазвичай не використовує ні поділ на кілька файлів, ні назву файлів для їх інтерпретації. Це стосується лише текстових файлів, а не зображень, таких як екрани завантаження.</p>
            <p><sup>[b]</sup> Ці винятки, які можна розумно змінити в моді, такі:</p>
            <ul>
                <li><code>/Hearts of Iron IV/gfx/flags/</code> та її підпапки, де назва повинна відповідати суворому форматуванню, щоб автоматично завантажуватися для країни.</li>
                <li><code>/Hearts of Iron IV/history/countries/</code>, де перші 3 літери призначають її країні.</li>
                <li>Файли <code>.txt</code> безпосередньо всередині <code>/Hearts of Iron IV/common/</code> (найважливіші <code>achievements.txt</code>, <code>combat_tactics.txt</code> та <code>graphicalculturetype.txt</code>)</li>
                <li><code>/Hearts of Iron IV/common/countries/colors.txt</code> та <code>/Hearts of Iron IV/common/countries/cosmetic.txt</code> повинні залишатися з тією ж назвою. Решта безпосередньо пов'язані у файлах <code>/Hearts of Iron IV/common/country_tags/*.txt</code>.</li>
                <li>Різноманітні елементи всередині <code>gfx</code>, такі як <code>/Hearts of Iron IV/gfx/maparrows/maparrow.txt</code> або <code>/Hearts of Iron IV/gfx/HOI4_icon.bmp</code>. Це не включає <code>/Hearts of Iron IV/gfx/loadingscreens</code> (кожен файл у ньому завантажується незалежно від назви файлу) або більшість файлів шрифтів/зображень (оскільки вони завантажуються за посиланням в іншому файлі).</li>
                <li>Файли всередині папок <code>/Hearts of Iron IV/map/</code> та <code>/Hearts of Iron IV/map/terrain/</code>, за винятком <code>/Hearts of Iron IV/map/strategicregions</code> та тих, що визначені в <code>/Hearts of Iron IV/default.map</code>.</li>
                <li><code>/Hearts of Iron IV/tutorial/tutorial.txt</code></li>
            </ul>
            <p><sup>[c]</sup> Єдиним винятком, який розглядається як звичайна помилка, є <code>MAP_ERROR: Palette in rivers.bmp is probably not correct</code>, спричинена тим, що палітра у файлі має ненульову кількість кольорів, зазвичай продукт збереження поверх неї в GIMP. На відміну від інших записів у <code>error.log</code>, позначених MAP_ERROR, це дозволяє відкривати гру без режиму налагодження та не виводить попередження при спробі перейти в одиночну гру.</p>
            <p><sup>[d]</sup> У динамічних модифікаторах, і лише в них, порядок модифікаторів у підказці не є жорстко закодованим. Натомість гра розміщує їх у тому ж порядку, в якому вони були написані в коді динамічного модифікатора. Однак порядок модифікаторів всередині динамічних модифікаторів не може призвести до жодної різниці в їх інтерпретації.</p>
            <p><sup>[e]</sup> У рідкісних випадках немає зображення, встановленого як заповнювач, що призводить до того, що використання неіснуючого спрайта також не призводить до появи нічого. Прикладом цього є баланси сил, де вказівка неіснуючого спрайта для представлення сторони призведе до того, що сторона не матиме іконки. Це особливо рідко, оскільки існує стандартне резервне зображення <code>GFX_default</code>, що показує собаку помилок у базовій грі.</p>

        </div> <!-- кінець #main-content -->
        
        <hr> 

        <!-- Фокусоване навігаційне меню (таке ж, як на головній сторінці) -->
        <nav id="focused-navigation-menu" class="focused-navigation">
            <h2>Основні розділи в роботі</h2>
            <p class="focused-nav-description">Швидкий доступ до сторінок, що зараз створюються та перекладаються.</p>
            <div class="focused-nav-links">
                <a href="decisions.html" class="nav-card"> <!-- Змініть на decisions_uk.html, якщо файл для укр. версії -->
                    <span class="nav-card-title">Decisions</span>
                    <span class="nav-card-description">(Рішення)</span>
                </a>
                <a href="events.html" class="nav-card"> <!-- Змініть на events_uk.html -->
                    <span class="nav-card-title">Events</span>
                    <span class="nav-card-description">(Події)</span>
                </a>
                <a href="./index" class="nav-card current-page-link"> <!-- Поточна сторінка, можна додати клас для виділення -->
                    <span class="nav-card-title">Homepage</span>
                    <span class="nav-card-description">(На головну)</span>
                </a>
                <a href="national_focuses.html" class="nav-card"> <!-- Змініть на national_focuses_uk.html -->
                    <span class="nav-card-title">National focuses</span>
                    <span class="nav-card-description">(Національні фокуси)</span>
                </a>
            </div>
        </nav>
    </div> <!-- кінець .container -->

    <footer>
        <p>Переклад сторінки Idea modding - Hearts of Iron 4 Wiki. Оригінал: <a href="https://hoi4.paradoxwikis.com/Idea_modding" target="_blank" rel="noopener noreferrer">hoi4.paradoxwikis.com/Idea_modding</a></p>
        <p>Дизайн та переклад (за допомогою ШІ) адаптовано для особистого використання.</p>
    </footer>
</div> <!-- кінець .page-wrapper -->

    <script>
        const themeSwitcher = document.getElementById('theme-switcher');
        const body = document.body;
        const defaultBaseClass = 'theme-dark-base'; 

        function applyTheme(themeName) {
            body.classList.remove('theme-light', 'theme-aistudio-dark', 'theme-nord-dark', 'theme-dracula', 'theme-one-dark-pro', defaultBaseClass);

            if (themeName === 'theme-light') {
                body.classList.add('theme-light');
            } else {
                body.classList.add(defaultBaseClass); 
                body.classList.add(themeName);       
            }
            if (themeSwitcher) {
                 themeSwitcher.value = themeName;
            }
            localStorage.setItem('theme', themeName); 
        }
        
        const savedTheme = localStorage.getItem('theme') || 'theme-light';
        applyTheme(savedTheme);

        if (themeSwitcher) {
            themeSwitcher.addEventListener('change', function() {
                applyTheme(this.value);
            });
        }
        
        function switchLanguage(lang) {
            const currentPage = window.location.pathname.split("/").pop();
            let targetPage = '';

            if (lang === 'uk') {
                // Припускаємо, що _uk версії для української, або просто .html
                if (currentPage.includes('_ru.html')) {
                    targetPage = currentPage.replace('_ru.html', '.html');
                     if (targetPage === '.html') targetPage = 'index.html'; // для головної
                } else if (!currentPage.includes('.html') && currentPage !== 'index.html') {
                     targetPage = currentPage.replace('.html', '.html');
                } else {
                    alert('Ви вже на українській версії.');
                    return;
                }
            } else if (lang === 'ru') {
                 if (currentPage.includes('.html')) {
                    targetPage = currentPage.replace('.html', '_ru.html');
                 } else if (currentPage === 'index.html') {
                    targetPage = 'index_ru.html'; // Головна сторінка
                 } else {
                    targetPage = currentPage.replace('.html', '_ru.html');
                 }
            }
            
            if (targetPage) {
                window.location.href = targetPage;
            }
        }

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                try {
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        const topBarHeight = document.querySelector('.top-bar')?.offsetHeight || 0;
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - topBarHeight - 15; 

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });

                         if(history.pushState && targetId !== "#") { 
                            history.pushState(null, null, targetId);
                        } else if (targetId !== "#") {
                            location.hash = targetId;
                        }
                    } else {
                        console.warn("Елемент для прокрутки не знайдено:", targetId);
                    }
                } catch (error) {
                     console.warn("Помилка при виборі елемента для прокрутки:", targetId, error);
                }
            });
        });
    </script>
</body>
</html>